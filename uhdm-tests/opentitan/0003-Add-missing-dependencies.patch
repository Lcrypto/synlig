From 5a5e994aa83cddf4fcafe21d6dc162efd9ad268e Mon Sep 17 00:00:00 2001
From: Wojciech Sipak <wsipak@antmicro.com>
Date: Tue, 17 Jan 2023 17:12:59 +0100
Subject: [PATCH 3/3] Add missing dependencies

---
 hw/ip/prim/prim_and2.core        | 1 +
 hw/ip/prim/prim_buf.core         | 2 +-
 hw/ip/prim/prim_clock_buf.core   | 2 +-
 hw/ip/prim/prim_flop.core        | 1 +
 hw/ip/prim/prim_sec_anchor.core  | 3 ++-
 hw/ip/prim/prim_subreg.core      | 2 ++
 hw/ip/prim/prim_usb_diff_rx.core | 2 +-
 hw/ip/prim/prim_xnor2.core       | 1 +
 hw/ip/prim/prim_xor2.core        | 1 +
 9 files changed, 11 insertions(+), 4 deletions(-)

diff --git a/hw/ip/prim/prim_and2.core b/hw/ip/prim/prim_and2.core
index 84a895b3a..92654431a 100644
--- a/hw/ip/prim/prim_and2.core
+++ b/hw/ip/prim/prim_and2.core
@@ -10,6 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_buf.core b/hw/ip/prim/prim_buf.core
index e2028b98a..648fcec33 100644
--- a/hw/ip/prim/prim_buf.core
+++ b/hw/ip/prim/prim_buf.core
@@ -10,7 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
-
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_clock_buf.core b/hw/ip/prim/prim_clock_buf.core
index 757d48329..4f571fbfb 100644
--- a/hw/ip/prim/prim_clock_buf.core
+++ b/hw/ip/prim/prim_clock_buf.core
@@ -10,7 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
-
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_flop.core b/hw/ip/prim/prim_flop.core
index b56bbe653..ced2c180b 100644
--- a/hw/ip/prim/prim_flop.core
+++ b/hw/ip/prim/prim_flop.core
@@ -10,6 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_sec_anchor.core b/hw/ip/prim/prim_sec_anchor.core
index 81d436430..282528487 100644
--- a/hw/ip/prim/prim_sec_anchor.core
+++ b/hw/ip/prim/prim_sec_anchor.core
@@ -10,8 +10,9 @@ filesets:
     files:
         - rtl/prim_sec_anchor_buf.sv
         - rtl/prim_sec_anchor_flop.sv
-
     file_type: systemVerilogSource
+    depend:
+        - lowrisc:prim:assert
 
 targets:
   default:
diff --git a/hw/ip/prim/prim_subreg.core b/hw/ip/prim/prim_subreg.core
index 31c7b93ba..8aaf94b29 100644
--- a/hw/ip/prim/prim_subreg.core
+++ b/hw/ip/prim/prim_subreg.core
@@ -16,6 +16,8 @@ filesets:
       - rtl/prim_subreg_ext.sv
       - rtl/prim_subreg_shadow.sv
     file_type: systemVerilogSource
+    depend:
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_usb_diff_rx.core b/hw/ip/prim/prim_usb_diff_rx.core
index f34cea4ed..f62fc0293 100644
--- a/hw/ip/prim/prim_usb_diff_rx.core
+++ b/hw/ip/prim/prim_usb_diff_rx.core
@@ -10,7 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
-
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_xnor2.core b/hw/ip/prim/prim_xnor2.core
index cdfbd88c3..360cb2c27 100644
--- a/hw/ip/prim/prim_xnor2.core
+++ b/hw/ip/prim/prim_xnor2.core
@@ -10,6 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
diff --git a/hw/ip/prim/prim_xor2.core b/hw/ip/prim/prim_xor2.core
index 5da73c792..07f486d5a 100644
--- a/hw/ip/prim/prim_xor2.core
+++ b/hw/ip/prim/prim_xor2.core
@@ -10,6 +10,7 @@ filesets:
     depend:
       - lowrisc:prim:prim_pkg
       - lowrisc:prim:primgen
+      - lowrisc:prim:assert
 
   files_verilator_waiver:
     depend:
-- 
2.38.1

