From 1f0db3c237458698bb077d845242bb932496c34e Mon Sep 17 00:00:00 2001
From: Kamil Rakoczy <krakoczy@antmicro.com>
Date: Tue, 14 Mar 2023 12:13:33 +0100
Subject: [PATCH 05/18] Fix wire not found

Signed-off-by: Kamil Rakoczy <krakoczy@antmicro.com>
---
 hw/vendor/lowrisc_ibex/rtl/ibex_cs_registers.sv | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/hw/vendor/lowrisc_ibex/rtl/ibex_cs_registers.sv b/hw/vendor/lowrisc_ibex/rtl/ibex_cs_registers.sv
index 0191742bb..5cecca07f 100644
--- a/hw/vendor/lowrisc_ibex/rtl/ibex_cs_registers.sv
+++ b/hw/vendor/lowrisc_ibex/rtl/ibex_cs_registers.sv
@@ -1163,11 +1163,11 @@ module ibex_cs_registers #(
       assign pmp_cfg_wdata[i].write = pmp_mseccfg_q.mml ? csr_wdata_int[(i%4)*PMP_CFG_W+1] :
                                                           &csr_wdata_int[(i%4)*PMP_CFG_W+:2];
       assign pmp_cfg_wdata[i].read  = csr_wdata_int[(i%4)*PMP_CFG_W];
-
+      localparam logic [5:0] local_pmp_cfg_rst = pmp_cfg_rst[i];
       ibex_csr #(
         .Width     ($bits(pmp_cfg_t)),
         .ShadowCopy(ShadowCSR),
-        .ResetValue(pmp_cfg_rst[i])
+        .ResetValue(local_pmp_cfg_rst)
       ) u_pmp_cfg_csr (
         .clk_i     (clk_i),
         .rst_ni    (rst_ni),
@@ -1198,7 +1198,6 @@ module ibex_cs_registers #(
         assign pmp_addr_we[i] = csr_we_int & ~pmp_cfg_locked[i] &
                                 (csr_addr == (CSR_OFF_PMP_ADDR + i[11:0]));
       end
-
       ibex_csr #(
         .Width     (PMPAddrWidth),
         .ShadowCopy(ShadowCSR),
-- 
2.39.0

